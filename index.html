<!doctype html>
<html lang="de">
  <head>
    <meta charset="utf-8" />
    <title>Jonathan Heart</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="description" content="musician · producer · mixing engineer" />
    <link rel="stylesheet" href="styles.css" />
  </head>
  <body>

    <!-- Fixed Top Navigation -->
    <header class="site-nav">
      <nav class="wrap">
        <!-- Weißes Haus-Icon als SVG -->
        <a href="#top" class="home-link" aria-label="Home">
          <svg class="home-icon" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" width="24" height="24" fill="currentColor">
            <path d="M3 9.5l9-7 9 7V20a1 1 0 0 1-1 1h-5v-6H9v6H4a1 1 0 0 1-1-1V9.5z"/>
          </svg>
        </a>

        <!-- Rechts: Navigation-->
        <ul class="nav-list">
          <li><a href="#about">about</a></li>
          <li><a href="#work">selected work</a></li>
          <li><a href="#music">music</a></li>
          <li><a href="#studio">studio</a></li>
          <li><a href="#mixing">mixing</a></li>
          <li><a href="#contact">contact</a></li>
        </ul>

        <!-- Burger-Button (nur sichtbar auf Mobile) -->
        <button class="burger" aria-label="Menu">☰</button>
      </nav>
    </header>

    <!-- Landing Hero (zentriert, wie John Mayer) -->
    <section class="hero landing">
      <div class="hero-inner">
        <h1 class="hero-title">Jonathan Heart</h1>
        <p class="hero-subtitle">musician · producer · mixing engineer</p>
        <div class="social-links">
          <a href="https://instagram.com/deinprofil" target="_blank" aria-label="Instagram">
            <span class="icon-mask" style="--icon: url('assets/icons/Instagram.svg')"></span>
          </a>
          <a href="https://open.spotify.com/artist/deinid" target="_blank" aria-label="Spotify">
            <span class="icon-mask" style="--icon: url('assets/icons/Spotify.svg')"></span>
          </a>
          <a href="https://youtube.com/@deinprofil" target="_blank" aria-label="YouTube">
            <span class="icon-mask" style="--icon: url('assets/icons/Youtube.svg')"></span>
          </a>
          <a href="mailto:deineadresse@email.com" target="_blank" aria-label="Email">
            <span class="icon-mask" style="--icon: url('assets/icons/E-Mail.svg')"></span>
          </a>
        </div>
       
      </div>
    </section>

    <!-- Erste Content Section -->
    <section id="about" class="wrap section">
      <h2>About</h2>
      <div class="split">
        <img src="assets/img/Rose Guitar Square.jpg" alt="Jonathan Heart" class="content-img">

        <div>
          <p class="slogan">clarity through distortion.</p>
          <p>Jonathan Heart is a musician, producer and mixing engineer based in Berlin, Germany. His approach is shaped as much by instruments and live playing as by the technical craft of sound.</p>
          <p>In the studio he is less interested in perfection than in presence, keeping the rough edges that carry emotion. Mixing and mastering are ways of listening closely to the stories of others and enhancing them without erasing what makes them human.</p>
          <p>As part of <em>badbadbad.</em> and in support of <em>Joël João</em>, Jonathan extends this philosophy into collaboration. On stage he is not looking for praise but for resonance, using sound as a way to connect and communicate.</p>
          <p>After years in the studio and on stage technical abilities have moved to the background and made way for an understanding of music as a means to evoke emotion.</p>
        </div>
      </div>
    </section>

    <section id="work" class="wrap section">
      <h2>Selected Work</h2>

      <!-- Spotify Playlist (fixe Höhe via CSS-Variable; Größe mit .s/.m/.l steuerbar) -->
        <div class="embed spotify xs" style="margin:56px auto;">
          <iframe
            src="https://open.spotify.com/embed/playlist/3Dx1Mv3YxzqyDBACvLPxs4?utm_source=generator&theme=0"
            loading="lazy"
            allow="autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture"
            allowfullscreen>
          </iframe>
        </div>

      <div class="grid">
          <!-- YouTube Playlist (responsiv 16:9 via CSS) -->
          <div class="embed youtube xs">
            <iframe
              src="https://www.youtube.com/embed/hkcfdRgLheQ?si=AkYb-eO_d8HOrZc8"
              title="YouTube Playlist"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen>
            </iframe>
          </div>

          <div class="embed youtube xs">
            <iframe
              src="https://www.youtube.com/embed/EthbAJ00iqg?si=SSlg-FPbyOAa0HfJ"
              title="YouTube video player"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen>
            </iframe>
          </div>

          <div class="embed youtube xs">
            <iframe
              src="https://www.youtube.com/embed/DV68w9O-R9E?si=RhxlV3EuEdjDJdax"
              title="YouTube video player"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen>
            </iframe>
          </div>

          <div class="embed youtube xs">
            <iframe
              src="https://www.youtube.com/embed/REbrKoZy1YI?si=v2KlKfX2F-7jrz2e"
              title="YouTube video player"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen>
            </iframe>
          </div>

          <div class="embed youtube xs">
            <iframe
              src="https://www.youtube.com/embed/Ic5oqa0zLKM?si=HDdqKrm-X4Xc3vlZ"
              title="YouTube video player"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen>
            </iframe>
          </div>

          <div class="embed youtube xs">
            <iframe
              src="https://www.youtube.com/embed/Y3vEmhQQbto?si=yOWsaC8aVG_hCxOC"
              title="YouTube video player"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen>
            </iframe>
          </div>

          <div class="embed youtube xs">
            <iframe
              src="https://www.youtube.com/embed/RtfhpJwiSDU?si=RO1D4SPHQDZPzsBt"
              title="YouTube video player"
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share"
              allowfullscreen>
            </iframe>
          </div>     
      </div>
    </section>

    <section id="music" class="wrap section">
      <h2>Music</h2>
      <div class="grid">

        <div class="embed video xs">
          <video controls preload="none" playsinline webkit-playsinline data-autoposter>
            <source src="assets/video/Day_at_the_Stu_web.mp4" type="video/mp4" />
          </video>
        </div>

        <div class="embed video xs">
          <video controls preload="none" playsinline webkit-playsinline data-autoposter>
            <source src="assets/video/Just a little progression I came up with.mp4" type="video/mp4" />
          </video>
        </div>

        <div class="embed video xs">
          <video controls preload="none" playsinline webkit-playsinline data-autoposter>
            <source src="assets/video/six six strings v4.mp4" type="video/mp4" />
          </video>
        </div>

        <div class="embed video xs">
          <video controls preload="none" playsinline webkit-playsinline data-autoposter>
            <source src="assets/video/Bass playing/Is this hope.mp4" type="video/mp4" />
          </video>
        </div>

        <div class="embed video xs">
          <video controls preload="none" playsinline webkit-playsinline data-autoposter>
            <source src="assets/video/Bass playing/melody.mp4" type="video/mp4" />
          </video>
        </div>

        <div class="embed video xs">
          <video controls preload="none" playsinline webkit-playsinline data-autoposter>
            <source src="assets/video/Bass playing/Quicksand.mp4" type="video/mp4" />
          </video>
        </div>

      </div>
    </section>

    <section id="studio" class="wrap section">
      <h2>Studio</h2>

      <div class="gallery-layout">
        <div id="gallery" class="gallery-grid"></div>
          <aside class="gallery-footer">
            <button id="gallery-more" class="btn-more" hidden>Load more</button>
          </aside>
        </div>

      <!-- Lightbox mit Navigation -->
      <div id="lightbox" class="lightbox" hidden>
        <button class="lb-close" aria-label="Close">×</button>
        <button class="lb-nav lb-prev" aria-label="Previous">‹</button>
        <img id="lightbox-img" alt="">
        <button class="lb-nav lb-next" aria-label="Next">›</button>
        <div class="lb-counter"><span id="lb-i">1</span>/<span id="lb-n">1</span></div>
      </div>
        <!-- Leistungen/Referenzen -->
    </section>

    <section id="mixing" class="wrap section">
      <h2>Mixing</h2>
      <div class="grid">


      </div>
      <!-- Leistungen/Referenzen -->
    </section>

    <section id="contact" class="wrap section">
      <h2>Contact</h2>
      <p>Mail: <a href="mailto:booking@deinedomain.com">booking@deinedomain.com</a></p>
    </section>

    <footer class="wrap small">
      © <span id="y"></span> Jonathan Heart
    </footer>
    <script>document.getElementById("y").textContent = new Date().getFullYear();</script>

<!-- Java Scripts-->
    <script>
      const burger = document.querySelector('.burger');
      const nav = document.querySelector('.nav-list');

      burger.addEventListener('click', () => {
        nav.classList.toggle('show');
      });
    </script>

    <script>
    (() => {
      const vids = [...document.querySelectorAll('video[data-autoposter]')];

      const makePoster = (vid) => {
        // Quelle holen
        const srcEl = vid.querySelector('source');
        const src = srcEl ? srcEl.src : vid.currentSrc;
        if (!src) return;

        // Offscreen-Video zum Frame-Grab
        const temp = document.createElement('video');
        temp.muted = true;
        temp.playsInline = true;
        temp.preload = 'auto';
        temp.crossOrigin = 'anonymous'; // für gleiche Domain ok; bei CDN CORS-Header nötig

        const s = document.createElement('source');
        s.src = src; s.type = 'video/mp4';
        temp.appendChild(s);

        // 1) Metadaten da -> auf Frame 0.05s springen
        temp.addEventListener('loadedmetadata', () => {
          try { temp.currentTime = 0.05; } catch(e) { /* iOS kann gleich seeken */ }
        }, { once: true });

        // 2) Nach dem Seek Frame in Canvas ziehen -> poster setzen
        temp.addEventListener('seeked', () => {
          try {
            const c = document.createElement('canvas');
            c.width = temp.videoWidth; c.height = temp.videoHeight;
            c.getContext('2d').drawImage(temp, 0, 0, c.width, c.height);
            const dataURL = c.toDataURL('image/jpeg', 0.72);
            vid.setAttribute('poster', dataURL);
          } catch (e) {
            // Wenn CORS blockt: Poster bleibt leer (kein Beinbruch)
          }
          // Aufräumen
          temp.pause();
          temp.removeAttribute('src');
          while (temp.firstChild) temp.removeChild(temp.firstChild);
        }, { once: true });

        temp.load();
      };

      const io = new IntersectionObserver((entries, obs) => {
        entries.forEach(entry => {
          if (!entry.isIntersecting) return;
          const vid = entry.target;
          obs.unobserve(vid);
          if (!vid.getAttribute('poster')) makePoster(vid);
        });
      }, { rootMargin: '200px' });

      vids.forEach(v => io.observe(v));
    })();
    </script>

    <!-- Bilder Gallery Studio Script-->
    <script>
    (async () => {
      const grid = document.querySelector('#gallery');
      const btn  = document.querySelector('#gallery-more');

      const PAGE = 3; // initial 3 Bilder, bleibt wie bei dir
      const BASE = 'assets/img/gallery/Studio%20Bilder/';
      const EXT  = 'jpg';

      let items = [], i = 0;
      let anchors = [];   // <a.photo>-Liste
      let idx = 0;        // aktueller Index in Lightbox
      let touchStartX = null;

      try {
        const res = await fetch(`${BASE}manifest.json`);
        items = await res.json();
      } catch (e) {
        console.warn('No gallery manifest', e);
      }

      const fullPath = id => `${BASE}full/${id}.${EXT}`;

      function refreshAnchors(){
        anchors = Array.from(grid.querySelectorAll('a.photo'));
        anchors.forEach((a, k) => a.dataset.index = String(k)); // k == Index in items für bisher gerenderte
        // lbN NICHT hier setzen
      }

      grid.addEventListener('click', (e) => {
        const a = e.target.closest('a.photo');
        if (!a) return;
        e.preventDefault();
        openLightbox(parseInt(a.dataset.index || '0', 10)); // <- dieser Index gilt jetzt global in items
      });

      function renderNext(n = PAGE) {
        const slice = items.slice(i, i + n);
        slice.forEach((it) => {
          const id  = it.id || it.file?.replace(/\.\w+$/, '');
          const alt = it.alt || '';
          const a = document.createElement('a');
          a.className = 'photo';
          a.href = fullPath(id);
          a.dataset.full = a.href;
          a.innerHTML = `<img loading="lazy" decoding="async" src="${fullPath(id)}" alt="${alt}">`;
          grid.appendChild(a);
        });
        i += slice.length;
        btn.hidden = i >= items.length;
        refreshAnchors();
      }

      // --- Lightbox Logik ---
      const lb    = document.getElementById('lightbox');
      const lbImg = document.getElementById('lightbox-img');
      const lbClose = document.querySelector('.lb-close');
      const lbPrev  = document.querySelector('.lb-prev');
      const lbNext  = document.querySelector('.lb-next');
      const lbI     = document.getElementById('lb-i');
      const lbN     = document.getElementById('lb-n');
      if (lbN) lbN.textContent = String(items.length);

      function show(index){
        if (!items.length) return;

        // wrap-around über die *gesamte* Anzahl
        if (index < 0) index = items.length - 1;
        if (index >= items.length) index = 0;
        idx = index;

        // aktuellen Eintrag aus items holen
        const it = items[idx];
        const id  = it.id || it.file?.replace(/\.\w+$/, '');
        const alt = it.alt || '';

        const src = fullPath(id);

        lbImg.src = '';
        lbImg.alt = alt;
        lbImg.src = src;

        // Counter: aktuelle Position / Gesamt
        lbI.textContent = String(idx + 1);
        lbN.textContent = String(items.length);

        // Preload next/prev (ebenfalls über items, nicht anchors)
        const nextIdx = (idx + 1) % items.length;
        const prevIdx = (idx - 1 + items.length) % items.length;
        const nextId  = items[nextIdx].id || items[nextIdx].file?.replace(/\.\w+$/, '');
        const prevId  = items[prevIdx].id || items[prevIdx].file?.replace(/\.\w+$/, '');
        new Image().src = fullPath(nextId);
        new Image().src = fullPath(prevId);
      }

      function openLightbox(index){
        document.body.classList.add('lb-open');
        lb.hidden = false;
        show(index);
      }

      function closeLightbox(){
        lb.hidden = true;
        lbImg.src = '';
        document.body.classList.remove('lb-open');
      }

      // Klick auf Thumbnail -> Lightbox öffnen
      grid.addEventListener('click', (e) => {
        const a = e.target.closest('a.photo');
        if (!a) return;
        e.preventDefault();
        openLightbox(parseInt(a.dataset.index || '0', 10));
      });

      // Buttons
      lbClose.addEventListener('click', closeLightbox);
      lbPrev.addEventListener('click', () => show(idx - 1));
      lbNext.addEventListener('click', () => show(idx + 1));

      // Overlay-Klick schließt
      lb.addEventListener('click', (e) => { if (e.target === lb) closeLightbox(); });

      // Keyboard: ESC, ← →
      // document.addEventListener('keydown', (e) => {
      //  if (lb.hidden) return;
      //  if (e.key === 'Escape') closeLightbox();
      //  if (e.key === 'ArrowLeft') show(idx - 1);
      //  if (e.key === 'ArrowRight') show(idx + 1);
      // });

      function onLightboxKeydown(e) {
        if (lb.hidden) return;

        // Harte Blockade für Safari/macOS, damit ESC nicht das App-Vollbild verlässt
        if (e.key === 'Escape' || e.key === 'Esc') {
          e.preventDefault();
          e.stopPropagation();
          if (typeof e.stopImmediatePropagation === 'function') e.stopImmediatePropagation();
          closeLightbox();
          return;
        }

        if (e.key === 'ArrowLeft') {
          e.preventDefault();
          e.stopPropagation();
          show(idx - 1);
        } else if (e.key === 'ArrowRight') {
          e.preventDefault();
          e.stopPropagation();
          show(idx + 1);
        }
      }

      // WICHTIG: capture:true, damit wir vor anderen Listenern/Browserevents drankommen
      window.addEventListener('keydown', onLightboxKeydown, { capture: true });

      // Touch-Swipe
      lb.addEventListener('touchstart', (e) => {
        touchStartX = e.touches[0].clientX;
      }, {passive:true});
      lb.addEventListener('touchend', (e) => {
        if (touchStartX == null) return;
        const dx = e.changedTouches[0].clientX - touchStartX;
        touchStartX = null;
        if (Math.abs(dx) > 40) {
          if (dx > 0) show(idx - 1); else show(idx + 1);
        }
      });

      // Initial
      renderNext();
      btn.hidden = items.length <= PAGE;
      btn.addEventListener('click', () => renderNext());
    })();
    </script>

    <script>
document.querySelectorAll('#music .embed.video video').forEach(v => {
  // Initial: alle als Thumbnail markieren
  v.classList.add('thumb');

  v.addEventListener('play', () => {
    v.classList.remove('thumb');
    v.classList.add('playing');
  });

  v.addEventListener('pause', () => {
    // Wenn wieder gestoppt/neu gestartet wird, zurück zu Thumb-Ansicht
    if (v.currentTime === 0 || v.ended) {
      v.classList.remove('playing');
      v.classList.add('thumb');
    }
  });

  v.addEventListener('ended', () => {
    v.classList.remove('playing');
    v.classList.add('thumb');
    v.currentTime = 0;
  });
});
</script>

  </body>
</html>
